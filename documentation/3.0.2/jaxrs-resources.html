<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;JAX-RS Application, Resources and Sub-Resources</title><link rel="stylesheet" type="text/css" href="/jersey.github.io/documentation.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Jersey 3.0.2 User Guide"><link rel="up" href="index.html" title="Jersey 3.0.2 User Guide"><link rel="prev" href="modules-and-dependencies.html" title="Chapter&nbsp;2.&nbsp;Modules and dependencies"><link rel="next" href="deployment.html" title="Chapter&nbsp;4.&nbsp;Application Deployment and Runtime Environments"><script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-3160303-1']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script></head><body class="contents"><div class="contents" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;JAX-RS Application, Resources and Sub-Resources</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="modules-and-dependencies.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="deployment.html">Next</a></td></tr></table><hr></div><div style="float:right"><a href="https://eclipse-ee4j.github.io/jersey"><img src="https://eclipse-ee4j.github.io/jersey.github.io/images/jersey_logo.png"></a></div><small>Links:
            <a href="index.html">
                Table of Contents
            </a> | <a href="user-guide.html">
                Single HTML
            </a></small><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="jaxrs-resources"></a>Chapter&nbsp;3.&nbsp;JAX-RS Application, Resources and Sub-Resources</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="jaxrs-resources.html#d0e1821">3.1. Root Resource Classes</a></span></dt><dd><dl><dt><span class="section"><a href="jaxrs-resources.html#d0e1860">3.1.1. @Path</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e1910">3.1.2. @GET, @PUT, @POST, @DELETE, ... (HTTP Methods)</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e1948">3.1.3. @Produces</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e2027">3.1.4. @Consumes</a></span></dt></dl></dd><dt><span class="section"><a href="jaxrs-resources.html#d0e2052">3.2. Parameter Annotations (@*Param)</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e2323">3.3. Sub-resources</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e2470">3.4. Life-cycle of Root Resource Classes</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e2541">3.5. Rules of Injection</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e2649">3.6. Use of @Context</a></span></dt><dt><span class="section"><a href="jaxrs-resources.html#d0e2677">3.7. Programmatic resource model</a></span></dt></dl></div><p>This chapter presents an overview of the core JAX-RS concepts - resources and sub-resources.</p><p>The JAX-RS 3.0.0 JavaDoc can be found online <a class="link" href="https://github.com/eclipse-ee4j/jaxrs-api/apidocs/index.html" target="_top">here</a>.
    </p><p>The JAX-RS 3.0.0 specification draft can be found online <a class="link" href="https://jakarta.ee/specifications/restful-ws/3.0/jakarta-restful-ws-spec-3.0.pdf" target="_top">here</a>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1821"></a>3.1.&nbsp;Root Resource Classes</h2></div></div></div><p>
            <span class="emphasis"><em>Root resource classes</em></span>
            are POJOs (Plain Old Java Objects) that are annotated with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a>
            have at least one method annotated with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> or a resource method designator annotation such as <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/GET.html" target="_top">@GET</a>,
            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PUT.html" target="_top">@PUT</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/POST.html" target="_top">@POST</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/DELETE.html" target="_top">@DELETE</a>. Resource methods are methods of a resource class annotated with a resource
            method designator. This section shows how to use Jersey to annotate Java objects to create RESTful web services.
        </p><p>The following code example is a very simple example of a root
            resource class using JAX-RS annotations. The example code shown here is
            from one of the samples that ships with Jersey, the zip file of which can
            be found in the maven repository
            <a class="link" href="https://repo1.maven.org/maven2/org/glassfish/jersey/examples/helloworld/3.0.2/" target="_top">here</a>.
        </p><p>
            </p><div class="example"><a name="d0e1854"></a><p class="title"><b>Example&nbsp;3.1.&nbsp;Simple hello world root resource class</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">package org.glassfish.jersey.examples.helloworld;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;

@Path("helloworld")
public class HelloWorldResource {
    public static final String CLICHED_MESSAGE = "Hello World!";

@GET
@Produces("text/plain")
    public String getHello() {
        return CLICHED_MESSAGE;
    }
}</pre></div></div><p><br class="example-break">
            Let's look at some of the JAX-RS annotations used in this example.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1860"></a>3.1.1.&nbsp;@Path</h3></div></div></div><p>The <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> annotation's value is a relative URI path. In the example above, the Java class will be hosted at the URI path
                <code class="literal">/helloworld</code>. This is an extremely simple use of the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> annotation. What makes JAX-RS so useful is that you can embed variables in the URIs.
            </p><p>
                <span class="emphasis"><em>URI path templates</em></span>
                are URIs with variables embedded within the URI syntax. These variables are substituted at runtime in order
                for a resource to respond to a request based on the substituted URI. Variables are denoted by curly braces.
                For example, look at the following <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> annotation:

                </p><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    gutter: false;">@Path("/users/{username}")</pre><p>

                In this type of example, a user will be prompted to enter their name, and then a Jersey web service configured
                to respond to requests to this URI path template will respond. For example, if the user entered their username
                as "Galileo", the web service will respond to the following URL:
                <code class="literal">http://example.com/users/Galileo</code>
            </p><p>To obtain the value of the username variable the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PathParam.html" target="_top">@PathParam</a> may be used on method parameter of a
                request method, for example:
                </p><div class="example"><a name="d0e1893"></a><p class="title"><b>Example&nbsp;3.2.&nbsp;Specifying URI path parameter</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("/users/{username}")
public class UserResource {

    @GET
    @Produces("text/xml")
    public String getUser(@PathParam("username") String userName) {
        ...
    }
}</pre></div></div><p><br class="example-break">
                If it is required that a user name must only consist of
                lower and upper case numeric characters then it is possible to declare a
                particular regular expression, which overrides the default regular
                expression, "[^/]+", for example:
                </p><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("users/{username: [a-zA-Z][a-zA-Z_0-9]*}")</pre><p>
                In this type of example the username variable will only match user names that begin with one upper or lower
                case letter and zero or more alpha numeric characters and the underscore character. If a user name does not
                match that a 404 (Not Found) response will occur.
            </p><p>A <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> value may or may not begin with a '/', it makes no difference. Likewise, by default, a
                <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> value may or may not end in a '/', it makes no difference, and thus request URLs that end or
                do not end in a '/' will both be matched.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1910"></a>3.1.2.&nbsp;@GET, @PUT, @POST, @DELETE, ... (HTTP Methods)</h3></div></div></div><p><a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/GET.html" target="_top">@GET</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PUT.html" target="_top">@PUT</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/POST.html" target="_top">@POST</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/DELETE.html" target="_top">@DELETE</a> and <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/HEAD.html" target="_top">@HEAD</a>
                are
                <span class="emphasis"><em>resource method designator</em></span>
                annotations defined
                by JAX-RS and which correspond to the similarly named HTTP methods. In
                the example above, the annotated Java method will process HTTP GET
                requests. The behavior of a resource is determined by which of the HTTP
                methods the resource is responding to.
            </p><p>The following example is an extract from the storage service
                sample that shows the use of the PUT method to create or update a
                storage container:
            </p><p>
                </p><div class="example"><a name="d0e1936"></a><p class="title"><b>Example&nbsp;3.3.&nbsp;PUT method</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@PUT
public Response putContainer() {
    System.out.println("PUT CONTAINER " + container);

    URI uri = uriInfo.getAbsolutePath();
    Container c = new Container(container, uri.toString());

    Response r;
    if (!MemoryStore.MS.hasContainer(c)) {
        r = Response.created(uri).build();
    } else {
        r = Response.noContent().build();
    }

    MemoryStore.MS.createContainer(c);
    return r;
}</pre></div></div><p><br class="example-break">
                By default the JAX-RS runtime will automatically support the methods HEAD and OPTIONS, if not explicitly
                implemented. For HEAD the runtime will invoke the implemented GET method (if present) and ignore the
                response entity (if set). A response returned for the OPTIONS method depends on the requested media type
                defined in the 'Accept' header. The OPTIONS method can return a response with a set of supported
                resource methods in the 'Allow' header or return
                a <a class="link" href="https://javaee.github.io/wadl/" target="_top">WADL</a> document.
                See <a class="link" href="wadl.html" title="Chapter&nbsp;18.&nbsp;WADL Support">wadl section</a> for more information.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1948"></a>3.1.3.&nbsp;@Produces</h3></div></div></div><p>
                The <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Produces.html" target="_top">@Produces</a> annotation is used to specify the MIME media types of representations a resource can
                produce and send back to the client. In this example, the Java method will produce representations identified
                by the MIME media type "text/plain". <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Produces.html" target="_top">@Produces</a> can be applied at both the class and method levels.
                Here's an example:
            </p><p>
                </p><div class="example"><a name="d0e1961"></a><p class="title"><b>Example&nbsp;3.4.&nbsp;Specifying output MIME type</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("/myResource")
@Produces("text/plain")
public class SomeResource {
    @GET
    public String doGetAsPlainText() {
        ...
    }

    @GET
    @Produces("text/html")
    public String doGetAsHtml() {
        ...
    }
}</pre></div></div><p><br class="example-break">
                The
                <code class="literal">doGetAsPlainText</code>
                method defaults to the MIME type of the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Produces.html" target="_top">@Produces</a> annotation at the class level. The
                <code class="literal">doGetAsHtml</code>
                method's <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Produces.html" target="_top">@Produces</a> annotation overrides the class-level <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Produces.html" target="_top">@Produces</a> setting, and specifies that the
                method can produce HTML rather than plain text.
            </p><p>If a resource class is capable of producing more that one MIME
                media type then the resource method chosen will correspond to the most
                acceptable media type as declared by the client. More specifically the
                Accept header of the HTTP request declares what is most acceptable. For
                example if the Accept header is "<code class="literal">Accept: text/plain</code>" then the
                <code class="literal">doGetAsPlainText</code>
                method will be invoked.
                Alternatively if the Accept header is "
                <code class="literal">Accept: text/plain;q=0.9, text/html</code>", which declares that the client can accept media types of
                "text/plain" and "text/html" but prefers the latter, then the
                <code class="literal">doGetAsHtml</code>
                method will be invoked.
            </p><p>More than one media type may be declared in the same <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Produces.html" target="_top">@Produces</a> declaration, for example:
            </p><p>
                </p><div class="example"><a name="d0e2003"></a><p class="title"><b>Example&nbsp;3.5.&nbsp;Using multiple output MIME types</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@GET
@Produces({"application/xml", "application/json"})
public String doGetAsXmlOrJson() {
    ...
}</pre></div></div><p><br class="example-break">
                The
                <code class="literal">doGetAsXmlOrJson</code>
                method will get
                invoked if either of the media types "application/xml" and
                "application/json" are acceptable. If both are equally acceptable then
                the former will be chosen because it occurs first.
            </p><p>Optionally, server can also specify the quality factor for individual media types. These are
                considered if several are equally acceptable by the client. For example:</p><p>
                </p><div class="example"><a name="d0e2016"></a><p class="title"><b>Example&nbsp;3.6.&nbsp;Server-side content negotiation</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@GET
@Produces({"application/xml; qs=0.9", "application/json"})
public String doGetAsXmlOrJson() {
    ...
}</pre></div></div><p><br class="example-break">
                In the above sample, if client accepts both "application/xml" and "application/json" (equally),
                then a server always sends "application/json", since "application/xml" has a lower quality factor.
            </p><p>The examples above refers explicitly to MIME media types for
                clarity. It is possible to refer to constant values, which may reduce
                typographical errors, see the constant field values of <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/MediaType.html" target="_top">MediaType</a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2027"></a>3.1.4.&nbsp;@Consumes</h3></div></div></div><p>The <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Consumes.html" target="_top">@Consumes</a> annotation is used to specify the MIME media types of representations
                that can be consumed by a resource. The above example can be modified to set the cliched
                message as follows:
            </p><p>
                </p><div class="example"><a name="d0e2037"></a><p class="title"><b>Example&nbsp;3.7.&nbsp;Specifying input MIME type</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@POST
@Consumes("text/plain")
public void postClichedMessage(String message) {
    // Store the message
}</pre></div></div><p><br class="example-break">
            </p><p>In this example, the Java method will consume representations
                identified by the MIME media type "text/plain". Notice that the resource
                method returns void. This means no representation is returned and
                response with a status code of 204 (No Content) will be returned to the client.
            </p><p><a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Consumes.html" target="_top">@Consumes</a> can be applied at both the class and the method levels and more than one media type
                may be declared in the same <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Consumes.html" target="_top">@Consumes</a> declaration.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2052"></a>3.2.&nbsp;Parameter Annotations (@*Param)</h2></div></div></div><p>Parameters of a resource method may be annotated with parameter-based annotations to extract information
            from a request. One of the previous examples presented the use of <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PathParam.html" target="_top">@PathParam</a> to extract a path
            parameter from the path component of the request URL that matched the path declared in <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a>.
        </p><p><a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/QueryParam.html" target="_top">@QueryParam</a> is used to extract query parameters from the Query component of the request URL.
            The following example is an extract from the sparklines sample:
        </p><div class="example"><a name="d0e2067"></a><p class="title"><b>Example&nbsp;3.8.&nbsp;Query parameters</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("smooth")
@GET
public Response smooth(
    @DefaultValue("2") @QueryParam("step") int step,
    @DefaultValue("true") @QueryParam("min-m") boolean hasMin,
    @DefaultValue("true") @QueryParam("max-m") boolean hasMax,
    @DefaultValue("true") @QueryParam("last-m") boolean hasLast,
    @DefaultValue("blue") @QueryParam("min-color") ColorParam minColor,
    @DefaultValue("green") @QueryParam("max-color") ColorParam maxColor,
    @DefaultValue("red") @QueryParam("last-color") ColorParam lastColor) {
    ...
}</pre></div></div><br class="example-break"><p>If a query parameter "step" exists in the query component of the
            request URI then the "step" value will be extracted and parsed as a
            32 bit signed integer and assigned to the step method parameter. If "step"
            does not exist then a default value of 2, as declared in the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/DefaultValue.html" target="_top">@DefaultValue</a>
            annotation, will be assigned to the step method parameter. If the "step"
            value cannot be parsed as a 32 bit signed integer then a HTTP 404 (Not
            Found) response is returned. User defined Java types such as
            <code class="literal">ColorParam</code>
            may be used, which as implemented as
            follows:
        </p><div class="example"><a name="d0e2080"></a><p class="title"><b>Example&nbsp;3.9.&nbsp;Custom Java type for consuming request parameters</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">public class ColorParam extends Color {

    public ColorParam(String s) {
        super(getRGB(s));
    }

    private static int getRGB(String s) {
        if (s.charAt(0) == '#') {
            try {
                Color c = Color.decode("0x" + s.substring(1));
                return c.getRGB();
            } catch (NumberFormatException e) {
                throw new WebApplicationException(400);
            }
        } else {
            try {
                Field f = Color.class.getField(s);
                return ((Color)f.get(null)).getRGB();
            } catch (Exception e) {
                throw new WebApplicationException(400);
            }
        }
    }
}</pre></div></div><br class="example-break"><p>In general the Java type of the method parameter may:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Be a primitive type;</p></li><li class="listitem"><p>Have a constructor that accepts a single
                    <code class="literal">String</code>
                    argument;
                </p></li><li class="listitem"><p>Have a static method named
                    <code class="literal">valueOf</code>
                    or
                    <code class="literal">fromString</code>
                    that accepts a single
                    <code class="literal">String</code>
                    argument (see, for example,
                    <code class="literal">Integer.valueOf(String)</code>
                    and <code class="literal">java.util.UUID.fromString(String)</code>);
                </p></li><li class="listitem"><p>Have a registered implementation of <code class="literal">jakarta.ws.rs.ext.ParamConverterProvider</code> JAX-RS
                    extension SPI that returns a <code class="literal">jakarta.ws.rs.ext.ParamConverter</code> instance capable of
                    a "from string" conversion for the type.
                     or
                </p></li><li class="listitem"><p>Be <code class="literal">List&lt;T&gt;</code>,
                    <code class="literal">Set&lt;T&gt;</code>
                    or
                    <code class="literal">SortedSet&lt;T&gt;</code>, where
                    <code class="literal">T</code>
                    satisfies 2 or 3 above. The resulting collection is read-only.
                </p></li></ol></div><p>Sometimes parameters may contain more than one value for the same
            name. If this is the case then types in 5) may be used to obtain all
            values.
        </p><p>If the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/DefaultValue.html" target="_top">@DefaultValue</a> is not used in conjunction with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/QueryParam.html" target="_top">@QueryParam</a>
            and the query parameter is not present in the request then value will be
            an empty collection for<code class="literal">List</code>, <code class="literal">Set</code> or <code class="literal">SortedSet</code>,
            <code class="literal">null</code> for other object types, and the Java-defined default for primitive types.
        </p><p>The <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PathParam.html" target="_top">@PathParam</a> and the other parameter-based annotations, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/MatrixParam.html" target="_top">@MatrixParam</a>,
            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/HeaderParam.html" target="_top">@HeaderParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/CookieParam.html" target="_top">@CookieParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/FormParam.html" target="_top">@FormParam</a> obey the same rules as <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/QueryParam.html" target="_top">@QueryParam</a>.
            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/MatrixParam.html" target="_top">@MatrixParam</a> extracts information from URL path segments. <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/HeaderParam.html" target="_top">@HeaderParam</a> extracts information
            from the HTTP headers. <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/CookieParam.html" target="_top">@CookieParam</a> extracts information from the cookies declared in cookie related HTTP
            headers.
        </p><p><a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/FormParam.html" target="_top">@FormParam</a> is slightly special because it extracts information from a request representation that
            is of the MIME media type
            <code class="literal">"application/x-www-form-urlencoded"</code>
            and conforms to the encoding
            specified by HTML forms, as described here. This parameter is very useful for extracting information that is
            POSTed by HTML forms, for example the following extracts the form parameter named "name" from the POSTed form
            data:
        </p><p>
            </p><div class="example"><a name="d0e2199"></a><p class="title"><b>Example&nbsp;3.10.&nbsp;Processing POSTed HTML form</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@POST
@Consumes("application/x-www-form-urlencoded")
public void post(@FormParam("name") String name) {
    // Store the message
}</pre></div></div><p><br class="example-break">
        </p><p>If it is necessary to obtain a general map of parameter name to
            values then, for query and path parameters it is possible to do the
            following:
        </p><p>
            </p><div class="example"><a name="d0e2209"></a><p class="title"><b>Example&nbsp;3.11.&nbsp;Obtaining general map of URI path and/or query parameters</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@GET
public String get(@Context UriInfo ui) {
    MultivaluedMap&lt;String, String&gt; queryParams = ui.getQueryParameters();
    MultivaluedMap&lt;String, String&gt; pathParams = ui.getPathParameters();
}</pre></div></div><p><br class="example-break">
        </p><p>For header and cookie parameters the following:</p><p>
            </p><div class="example"><a name="d0e2219"></a><p class="title"><b>Example&nbsp;3.12.&nbsp;Obtaining general map of header parameters</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@GET
public String get(@Context HttpHeaders hh) {
    MultivaluedMap&lt;String, String&gt; headerParams = hh.getRequestHeaders();
    Map&lt;String, Cookie&gt; pathParams = hh.getCookies();
}</pre></div></div><p><br class="example-break">
        </p><p>In general <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a> can be used to obtain contextual Java types related to the request or response.
        </p><p>Because form parameters (unlike others) are part of the message entity, it is possible to do the following:</p><p>
            </p><div class="example"><a name="d0e2234"></a><p class="title"><b>Example&nbsp;3.13.&nbsp;Obtaining general map of form parameters</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@POST
@Consumes("application/x-www-form-urlencoded")
public void post(MultivaluedMap&lt;String, String&gt; formParams) {
    // Store the message
}</pre></div></div><p><br class="example-break">

            I.e. you don't need to use the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a> annotation.
        </p><p>Another kind of injection is the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/BeanParam.html" target="_top">@BeanParam</a> which allows to inject the parameters described above into a
            single bean. A bean annotated with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/BeanParam.html" target="_top">@BeanParam</a> containing any fields and appropriate
            <code class="literal">*param</code>
            annotation(like <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PathParam.html" target="_top">@PathParam</a>) will be initialized with corresponding request values in expected way as if these
            fields were in the resource class. Then instead of injecting request values like path param into a constructor parameters
            or class fields the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/BeanParam.html" target="_top">@BeanParam</a> can be used to inject such a bean into a resource or resource method. The
            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/BeanParam.html" target="_top">@BeanParam</a> is used this way to aggregate more request parameters into a single bean.
        </p><div class="example"><a name="d0e2263"></a><p class="title"><b>Example&nbsp;3.14.&nbsp;Example of the bean which will be used as <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/BeanParam.html" target="_top">@BeanParam</a>
            </b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">public class MyBeanParam {
    @PathParam("p")
    private String pathParam;

    @MatrixParam("m")
    @Encoded
    @DefaultValue("default")
    private String matrixParam;

    @HeaderParam("header")
    private String headerParam;

    private String queryParam;

    public MyBeanParam(@QueryParam("q") String queryParam) {
        this.queryParam = queryParam;
    }

    public String getPathParam() {
        return pathParam;
    }
    ...
}</pre></div></div><br class="example-break"><div class="example"><a name="d0e2271"></a><p class="title"><b>Example&nbsp;3.15.&nbsp;Injection of MyBeanParam as a method parameter:</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@POST
public void post(@BeanParam MyBeanParam beanParam, String entity) {
    final String pathParam = beanParam.getPathParam(); // contains injected path parameter "p"
    ...
}</pre></div></div><br class="example-break"><p>The example shows aggregation of injections <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PathParam.html" target="_top">@PathParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/QueryParam.html" target="_top">@QueryParam</a> <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/MatrixParam.html" target="_top">@MatrixParam</a>
            and <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/HeaderParam.html" target="_top">@HeaderParam</a> into one single bean. The rules for injections inside the bean are the same as described above
            for these injections. The <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/DefaultValue.html" target="_top">@DefaultValue</a> is used to define the default value for matrix parameter matrixParam.
            Also the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Encoded.html" target="_top">@Encoded</a> annotation has the same behaviour as if it were used for injection in the resource method
            directly. Injecting the bean parameter into @Singleton resource class fields is not allowed (injections into method
            parameter must be used instead).
        </p><p><a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/BeanParam.html" target="_top">@BeanParam</a> can contain all parameters injections
            (<a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/PathParam.html" target="_top">@PathParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/QueryParam.html" target="_top">@QueryParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/MatrixParam.html" target="_top">@MatrixParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/HeaderParam.html" target="_top">@HeaderParam</a>,
            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/CookieParam.html" target="_top">@CookieParam</a>, <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/FormParam.html" target="_top">@FormParam</a>). More
            beans can be injected into one resource or method parameters even if they inject the same request values. For example
            the following is possible:
        </p><div class="example"><a name="d0e2318"></a><p class="title"><b>Example&nbsp;3.16.&nbsp;Injection of more beans into one resource methods:</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@POST
public void post(@BeanParam MyBeanParam beanParam, @BeanParam AnotherBean anotherBean, @PathParam("p") pathParam,
String entity) {
    // beanParam.getPathParam() == pathParam
    ...
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2323"></a>3.3.&nbsp;Sub-resources</h2></div></div></div><p><a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> may be used on classes and such classes are referred to as root resource classes. <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a>
            may also be used on methods of root resource classes. This enables common functionality for a number of resources
            to be grouped together and potentially reused.
        </p><p>The first way <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> may be used is on resource methods and such methods are referred to as
            <span class="emphasis"><em>sub-resource methods</em></span>. The following example shows the method signatures for a root
            resource class from the jmaki-backend sample:
        </p><p>
            </p><div class="example"><a name="d0e2343"></a><p class="title"><b>Example&nbsp;3.17.&nbsp;Sub-resource methods</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Singleton
@Path("/printers")
public class PrintersResource {

    @GET
    @Produces({"application/json", "application/xml"})
    public WebResourceList getMyResources() { ... }

    @GET @Path("/list")
    @Produces({"application/json", "application/xml"})
    public WebResourceList getListOfPrinters() { ... }

    @GET @Path("/jMakiTable")
    @Produces("application/json")
    public PrinterTableModel getTable() { ... }

    @GET @Path("/jMakiTree")
    @Produces("application/json")
    public TreeModel getTree() { ... }

    @GET @Path("/ids/{printerid}")
    @Produces({"application/json", "application/xml"})
    public Printer getPrinter(@PathParam("printerid") String printerId) { ... }

    @PUT @Path("/ids/{printerid}")
    @Consumes({"application/json", "application/xml"})
    public void putPrinter(@PathParam("printerid") String printerId, Printer printer) { ... }

    @DELETE @Path("/ids/{printerid}")
    public void deletePrinter(@PathParam("printerid") String printerId) { ... }
}</pre></div></div><p><br class="example-break">
        </p><p>If the path of the request URL is "printers" then the resource methods not annotated with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a>
            will be selected. If the request path of the request URL is "printers/list" then first the root resource class
            will be matched and then the sub-resource methods that match "list" will be selected, which in this case
            is the sub-resource method <code class="literal">getListOfPrinters</code>. So, in this example hierarchical matching
            on the path of the request URL is performed.
        </p><p>The second way <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> may be used is on methods
            <span class="bold"><strong>not</strong></span>
            annotated
            with resource method designators such as <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/GET.html" target="_top">@GET</a> or <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/POST.html" target="_top">@POST</a>. Such methods are referred to as
            <span class="emphasis"><em>sub-resource locators</em></span>. The following example shows the method signatures for
            a root resource class and a resource class from the optimistic-concurrency sample:
        </p><p>
            </p><div class="example"><a name="d0e2376"></a><p class="title"><b>Example&nbsp;3.18.&nbsp;Sub-resource locators</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("/item")
public class ItemResource {
    @Context UriInfo uriInfo;

    @Path("content")
    public ItemContentResource getItemContentResource() {
        return new ItemContentResource();
    }

    @GET
    @Produces("application/xml")
        public Item get() { ... }
    }
}

public class ItemContentResource {

    @GET
    public Response get() { ... }

    @PUT
    @Path("{version}")
    public void put(@PathParam("version") int version,
                    @Context HttpHeaders headers,
                    byte[] in) {
        ...
    }
}</pre></div></div><p><br class="example-break">
        </p><p>The root resource class
            <code class="literal">ItemResource</code>
            contains the
            sub-resource locator method
            <code class="literal">getItemContentResource</code>
            that
            returns a new resource class. If the path of the request URL is
            "item/content" then first of all the root resource will be matched, then
            the sub-resource locator will be matched and invoked, which returns an
            instance of the
            <code class="literal">ItemContentResource</code>
            resource class.
            Sub-resource locators enable reuse of resource classes. A method can be annotated with the
            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/Path.html" target="_top">@Path</a> annotation with empty path (<code class="literal">@Path("/")</code> or <code class="literal">@Path("")</code>) which
            means that the sub resource locator is matched for the path of the enclosing resource (without sub-resource path).
        </p><p>
            </p><div class="example"><a name="d0e2404"></a><p class="title"><b>Example&nbsp;3.19.&nbsp;Sub-resource locators with empty path</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("/item")
public class ItemResource {

    @Path("/")
    public ItemContentResource getItemContentResource() {
        return new ItemContentResource();
    }
}</pre></div></div><p><br class="example-break">
        </p><p>In the example above the sub-resource locator method <code class="literal">getItemContentResource</code>
            is matched for example for request path "/item/locator" or even for only "/item".
        </p><p>In addition the processing of resource classes returned by
            sub-resource locators is performed at runtime thus it is possible to
            support polymorphism. A sub-resource locator may return different
            sub-types depending on the request (for example a sub-resource locator
            could return different sub-types dependent on the role of the principle
            that is authenticated). So for example the following sub resource locator is valid:
        </p><p>
            </p><div class="example"><a name="d0e2419"></a><p class="title"><b>Example&nbsp;3.20.&nbsp;Sub-resource locators returning sub-type</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("/item")
public class ItemResource {

    @Path("/")
    public Object getItemContentResource() {
        return new AnyResource();
    }
}</pre></div></div><p><br class="example-break">
        </p><p>Note that the runtime will not manage the life-cycle or perform any
            field injection onto instances returned from sub-resource locator methods.
            This is because the runtime does not know what the life-cycle of the
            instance is. If it is required that the runtime manages the sub-resources
            as standard resources the <code class="literal">Class</code> should be returned
            as shown in the following example:
        </p><p>
            </p><div class="example"><a name="d0e2432"></a><p class="title"><b>Example&nbsp;3.21.&nbsp;Sub-resource locators created from classes</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">import jakarta.inject.Singleton;

@Path("/item")
public class ItemResource {
    @Path("content")
    public Class&lt;ItemContentSingletonResource&gt; getItemContentResource() {
        return ItemContentSingletonResource.class;
    }
}

@Singleton
public class ItemContentSingletonResource {
    // this class is managed in the singleton life cycle
}</pre></div></div><p><br class="example-break">
        </p><p>JAX-RS resources are managed in per-request scope by default which means that
            new resource is created for each request.
            In this example the <code class="literal">jakarta.inject.Singleton</code> annotation says
            that the resource will be managed as singleton and not in request scope.
            The sub-resource locator method returns a class which means that the runtime
            will managed the resource instance and its life-cycle. If the method would return instance instead,
            the <code class="literal">Singleton</code> annotation would have no effect and the returned instance
            would be used.
        </p><p>The sub resource locator can also return a <span class="emphasis"><em>programmatic resource model</em></span>. See <a class="link" href="resource-builder.html" title="Chapter&nbsp;14.&nbsp;Programmatic API for Building Resources">resource builder section</a> for information of how the programmatic resource
            model is constructed. The following example shows very simple resource returned from the sub-resource locator method.
        </p><p>
            </p><div class="example"><a name="d0e2456"></a><p class="title"><b>Example&nbsp;3.22.&nbsp;Sub-resource locators returning resource model</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">import org.glassfish.jersey.server.model.Resource;

@Path("/item")
public class ItemResource {

    @Path("content")
    public Resource getItemContentResource() {
        return Resource.from(ItemContentSingletonResource.class);
    }
}</pre></div></div><p><br class="example-break">
        </p><p>The code above has exactly the same effect as previous example. <code class="literal">Resource</code> is a resource
            simple resource constructed from <code class="literal">ItemContentSingletonResource</code>. More complex programmatic
            resource can be returned as long they are valid resources.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2470"></a>3.4.&nbsp;Life-cycle of Root Resource Classes</h2></div></div></div><p>By default the life-cycle of root resource classes is per-request which,
            namely that a new instance of a root resource class is created every time
            the request URI path matches the root resource. This makes for a very
            natural programming model where constructors and fields can be utilized
            (as in the previous section showing the constructor of the
            <code class="literal">SparklinesResource</code>
            class) without concern for multiple
            concurrent requests to the same resource.
        </p><p>In general this is unlikely to be a cause of performance issues.
            Class construction and garbage collection of JVMs has vastly improved over
            the years and many objects will be created and discarded to serve and
            process the HTTP request and return the HTTP response.
        </p><p>Instances of singleton root resource classes can be declared by an instance of <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Application.html" target="_top">Application</a>.
        </p><p>Jersey supports two further life-cycles using Jersey specific annotations.</p><div class="table"><a name="d0e2487"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;Resource scopes</b></p><div class="table-contents"><table summary="Resource scopes" border="1"><colgroup><col width="11%"><col width="11%"><col width="22%"><col width="56%"></colgroup><thead><tr><th>Scope</th><th>Annotation</th><th>Annotation full class name</th><th>Description</th></tr></thead><tbody><tr><td>Request scope</td><td>@RequestScoped (or none)</td><td>org.glassfish.jersey.process.internal.RequestScoped</td><td><span class="emphasis"><em>Default lifecycle </em></span> (applied when no annotation is present). In this scope
                            the resource instance is created for each new request and used for processing of this request. If the
                            resource is used more than one time in the request processing, always the same instance will be used.
                            This can happen when a resource is a sub resource and is returned more times during the matching. In this
                            situation only one instance will serve the requests.</td></tr><tr><td>Per-lookup scope</td><td>@PerLookup</td><td>org.glassfish.hk2.api.PerLookup</td><td>In this scope
                            the resource instance is created every time it is needed for the processing even it handles
                            the same request.</td></tr><tr><td>Singleton</td><td>@Singleton</td><td>jakarta.inject.Singleton</td><td>In this scope there is only one instance per jax-rs application. Singleton resource can be either
                            annotated with @Singleton and its class can be registered using the instance of
                            <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Application.html" target="_top">Application</a>. You can also create singletons by registering singleton instances
                            into <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Application.html" target="_top">Application</a>.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2541"></a>3.5.&nbsp;Rules of Injection</h2></div></div></div><p>Previous sections have presented examples of annotated types, mostly
            annotated method parameters but also annotated fields of a class, for the
            injection of values onto those types.
        </p><p>This section presents the rules of injection of values on annotated
            types. Injection can be performed on fields, constructor parameters,
            resource/sub-resource/sub-resource locator method parameters and bean
            setter methods. The following presents an example of all such injection
            cases:
        </p><p>
            </p><div class="example"><a name="d0e2550"></a><p class="title"><b>Example&nbsp;3.23.&nbsp;Injection</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("{id:\\d+}")
public class InjectedResource {
    // Injection onto field
    @DefaultValue("q") @QueryParam("p")
    private String p;

    // Injection onto constructor parameter
    public InjectedResource(@PathParam("id") int id) { ... }

    // Injection onto resource method parameter
    @GET
    public String get(@Context UriInfo ui) { ... }

    // Injection onto sub-resource resource method parameter
    @Path("sub-id")
    @GET
    public String get(@PathParam("sub-id") String id) { ... }

    // Injection onto sub-resource locator method parameter
    @Path("sub-id")
    public SubResource getSubResource(@PathParam("sub-id") String id) { ... }

    // Injection using bean setter method
    @HeaderParam("X-header")
    public void setHeader(String header) { ... }
}</pre></div></div><p><br class="example-break">
        </p><p>There are some restrictions when injecting on to resource classes
            with a life-cycle of singleton scope. In such cases the class fields or
            constructor parameters cannot be injected with request specific parameters. So, for example
            the following is not allowed.</p><p>
            </p><div class="example"><a name="d0e2560"></a><p class="title"><b>Example&nbsp;3.24.&nbsp;Wrong injection into a singleton scope</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("resource")
@Singleton
public static class MySingletonResource {

    @QueryParam("query")
    String param; // WRONG: initialization of application will fail as you cannot
                  // inject request specific parameters into a singleton resource.

    @GET
    public String get() {
        return "query param: " + param;
    }
}</pre></div></div><p><br class="example-break">
        </p><p>
            The example above will cause validation failure during application initialization as singleton
            resources cannot inject request specific parameters. The same example would fail if the query
            parameter would be injected into constructor parameter of such a singleton. In other words, if you
            wish one resource instance to server more requests (in the same time) it cannot be bound
            to a specific request parameter.
        </p><p>
            The exception exists for specific request objects which can injected even into
            constructor or class fields. For these objects the runtime will inject proxies
            which are able to simultaneously server more request. These request objects are
            <code class="literal">HttpHeaders</code>, <code class="literal">Request</code>, <code class="literal">UriInfo</code>,
            <code class="literal">SecurityContext</code>. These proxies can be injected using the <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a>
            annotation. The following example shows injection of proxies into the singleton resource class.
        </p><p>
            </p><div class="example"><a name="d0e2587"></a><p class="title"><b>Example&nbsp;3.25.&nbsp;Injection of proxies into singleton</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("resource")
@Singleton
public static class MySingletonResource {
    @Context
    Request request; // this is ok: the proxy of Request will be injected into this singleton

    public MySingletonResource(@Context SecurityContext securityContext) {
        // this is ok too: the proxy of SecurityContext will be injected
    }

    @GET
    public String get() {
        return "query param: " + param;
    }
}</pre></div></div><p><br class="example-break">
        </p><p>
            To summarize the injection can be done into the following constructs:
        </p><div class="table"><a name="d0e2595"></a><p class="title"><b>Table&nbsp;3.2.&nbsp;Overview of injection types</b></p><div class="table-contents"><table summary="Overview of injection types" border="1"><colgroup><col width="16%"><col width="84%"></colgroup><thead><tr><th>Java construct</th><th>Description</th></tr></thead><tbody><tr><td>Class fields</td><td>
                            Inject value directly into the field of the class. The field can be private
                            and must not be final. Cannot be used in Singleton scope except proxiable types mentioned above.
                        </td></tr><tr><td>Constructor parameters</td><td>
                            The constructor will be invoked with injected values. If more
                            constructors exists the one with the most injectable parameters will be invoked.
                            Cannot be used in Singleton scope except proxiable types mentioned above.
                        </td></tr><tr><td>Resource methods</td><td>
                            The resource methods (these annotated with @GET, @POST, ...) can contain
                            parameters that can be injected when the resource method is executed.
                            Can be used in any scope.
                        </td></tr><tr><td>Sub resource locators</td><td>
                            The sub resource locators (methods annotated with @Path but not @GET, @POST, ...)
                            can contain parameters that can be injected when the resource method is executed.
                            Can be used in any scope.
                        </td></tr><tr><td>Setter methods</td><td>
                            Instead of injecting values directly into field the value can be injected into the
                            setter method which will initialize the field. This injection can be used only with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a>
                            annotation. This means
                            it cannot be used for example for injecting of query params but it can be used for injections of
                            request. The setters will be called after the object creation and
                            only once. The name of the method does not necessary have a setter pattern. Cannot be used
                            in Singleton scope except proxiable types mentioned above.
                        </td></tr></tbody></table></div></div><br class="table-break"><p>
            The following example shows all possible java constructs into which the values can be injected.

            </p><div class="example"><a name="d0e2638"></a><p class="title"><b>Example&nbsp;3.26.&nbsp;Example of possible injections</b></p><div class="example-contents"><pre class="&#xA;    toolbar: false;&#xA;    brush: java;&#xA;    ">@Path("resource")
public static class SummaryOfInjectionsResource {
    @QueryParam("query")
    String param; // injection into a class field


    @GET
    public String get(@QueryParam("query") String methodQueryParam) {
        // injection into a resource method parameter
        return "query param: " + param;
    }

    @Path("sub-resource-locator")
    public Class&lt;SubResource&gt; subResourceLocator(@QueryParam("query") String subResourceQueryParam) {
        // injection into a sub resource locator parameter
        return SubResource.class;
    }

    public SummaryOfInjectionsResource(@QueryParam("query") String constructorQueryParam) {
        // injection into a constructor parameter
    }


    @Context
    public void setRequest(Request request) {
        // injection into a setter method
        System.out.println(request != null);
    }
}

public static class SubResource {
    @GET
    public String get() {
        return "sub resource";
    }
}</pre></div></div><p><br class="example-break">
        </p><p>The <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/FormParam.html" target="_top">@FormParam</a> annotation is special and may only be utilized on resource and sub-resource methods.
            This is because it extracts information from a request entity.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2649"></a>3.6.&nbsp;Use of @Context</h2></div></div></div><p>Previous sections have introduced the use of <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a>. Chapter "Context" in the JAX-RS
            specification presents all the standard JAX-RS Java types that may be used with <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a>.
        </p><p>When deploying a JAX-RS application using servlet then
            <a class="link" href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/ServletConfig.html" target="_top">ServletConfig</a>,
            <a class="link" href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/ServletContext.html" target="_top">ServletContext</a>,
            <a class="link" href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/http/HttpServletRequest.html" target="_top">HttpServletRequest</a>
            and
            <a class="link" href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/http/HttpServletResponse.html" target="_top">HttpServletResponse</a>
            are available using <a class="link" href="https://eclipse-ee4j.github.io/jaxrs-api/apidocs/3.0.0/jakarta/ws/rs/core/Context.html" target="_top">@Context</a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2677"></a>3.7.&nbsp;Programmatic resource model</h2></div></div></div><p>Resources can be constructed from classes or instances but also can be constructed from a programmatic resource
            model. Every resource created from resource classes can also
            be constructed using the programmatic resource builder api. See <a class="link" href="resource-builder.html" title="Chapter&nbsp;14.&nbsp;Programmatic API for Building Resources">resource builder section</a> for more information.
        </p></div></div><link href="https://eclipse-ee4j.github.io/jersey.github.io/sh/shCore.css" rel="stylesheet" type="text/css"><link href="https://eclipse-ee4j.github.io/jersey.github.io/sh/shThemeDefault.css" rel="stylesheet" type="text/css"><script src="https://eclipse-ee4j.github.io/jersey.github.io/sh/shCore.js" type="text/javascript"></script><script src="https://eclipse-ee4j.github.io/jersey.github.io/sh/shAutoloader.js" type="text/javascript"></script><script type="text/javascript">
            function path() {
              var args = arguments,
                  result = []
                  ;

              for(var i = 0; i < args.length; i++)
                  result.push(args[i].replace('@', 'https://eclipse-ee4j.github.io/jersey.github.io/sh/'));

              return result
            };

            SyntaxHighlighter.autoloader.apply(null, path(
              'applescript            @shBrushAppleScript.js',
              'actionscript3 as3      @shBrushAS3.js',
              'bash shell             @shBrushBash.js',
              'coldfusion cf          @shBrushColdFusion.js',
              'cpp c                  @shBrushCpp.js',
              'c# c-sharp csharp      @shBrushCSharp.js',
              'css                    @shBrushCss.js',
              'delphi pascal          @shBrushDelphi.js',
              'diff patch pas         @shBrushDiff.js',
              'erl erlang             @shBrushErlang.js',
              'groovy                 @shBrushGroovy.js',
              'java                   @shBrushJava.js',
              'jfx javafx             @shBrushJavaFX.js',
              'js jscript javascript  @shBrushJScript.js',
              'perl pl                @shBrushPerl.js',
              'php                    @shBrushPhp.js',
              'text plain             @shBrushPlain.js',
              'py python              @shBrushPython.js',
              'ruby rails ror rb      @shBrushRuby.js',
              'sass scss              @shBrushSass.js',
              'scala                  @shBrushScala.js',
              'sql                    @shBrushSql.js',
              'vb vbnet               @shBrushVb.js',
              'xml xhtml xslt html    @shBrushXml.js'
            ));

            SyntaxHighlighter.all();
        </script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="modules-and-dependencies.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="deployment.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;Modules and dependencies&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Application Deployment and Runtime Environments</td></tr></table></div></div></body></html>